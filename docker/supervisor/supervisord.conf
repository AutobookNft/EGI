[supervisord]
nodaemon=true
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor

[unix_http_server]
file=/var/run/supervisord.sock
chmod=0700

[supervisorctl]
serverurl=unix:///var/run/supervisord.sock

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[program:nginx]
command=nginx -g "daemon off;"
autostart=true
autorestart=true
user=root
stdout_logfile=/var/log/supervisor/nginx.log
stderr_logfile=/var/log/supervisor/nginx.log

[program:php-fpm]
command=php-fpm -F
autostart=true
autorestart=true
user=root
stdout_logfile=/var/log/supervisor/php-fpm.log
stderr_logfile=/var/log/supervisor/php-fpm.log
# CRITICAL: Pass all environment variables to PHP-FPM
environment=
    APP_KEY="%(ENV_APP_KEY)s",
    APP_ENV="%(ENV_APP_ENV)s",
    APP_DEBUG="%(ENV_APP_DEBUG)s",
    APP_URL="%(ENV_APP_URL)s",
    DB_CONNECTION="%(ENV_DB_CONNECTION)s",
    DB_HOST="%(ENV_DB_HOST)s",
    DB_PORT="%(ENV_DB_PORT)s",
    DB_DATABASE="%(ENV_DB_DATABASE)s",
    DB_USERNAME="%(ENV_DB_USERNAME)s",
    DB_PASSWORD="%(ENV_DB_PASSWORD)s",
    REDIS_HOST="%(ENV_REDIS_HOST)s",
    REDIS_PORT="%(ENV_REDIS_PORT)s",
    REDIS_PASSWORD="%(ENV_REDIS_PASSWORD)s",
    CACHE_DRIVER="%(ENV_CACHE_DRIVER)s",
    SESSION_DRIVER="%(ENV_SESSION_DRIVER)s",
    QUEUE_CONNECTION="%(ENV_QUEUE_CONNECTION)s",
    FILESYSTEM_DISK="%(ENV_FILESYSTEM_DISK)s",
    IMAGE_DRIVER="%(ENV_IMAGE_DRIVER)s"
